

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>rs-fMRI &mdash; micapipe  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mica-pipe_tabs_tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mica-pipe_colors.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.js"></script>
        <script src="../../_static/sphinx_tabs/tabs.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Microstructural profile covariance" href="../02.microstructproc/index.html" />
    <link rel="prev" title="Diffusion-weighted imaging processing" href="../02.dwiproc/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #261F4A" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/html_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01.install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.whatyouneed/index.html">Usages Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.execution/index.html">Micapipe usage overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.whatsnew/index.html">What‚Äôs new?</a></li>
</ul>
<p class="caption"><span class="caption-text">Processing modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../02.structuralproc/index.html">Structural processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.dwiproc/index.html">Diffusion-weighted imaging processing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Resting-state fMRI processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#proc-rsfmri">-proc_rsfmri</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02.microstructproc/index.html">Microstructural profile covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.qc/index.html">Quality control</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05.mic2bids/index.html">From DICOMS to BIDS: <code class="docutils literal notranslate"><span class="pre">mic2bids</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.micapipe_cleanup/index.html"><code class="docutils literal notranslate"><span class="pre">micapipe_cleanup</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.micapipe_anonymize/index.html"><code class="docutils literal notranslate"><span class="pre">micapipe_anonymize</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.autotract/index.html">Automatic Bundle Segmentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../04.databases/index.html">Processing databases with <code class="docutils literal notranslate"><span class="pre">micapipe</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.matrices/index.html">Output matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.surfaces/index.html">Surface visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.gradients/index.html">Building gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.faq/index.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06.citingmicapipe/index.html">Citing micapipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.references/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.acknowledge/index.html">Acknowlegdements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">micapipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>rs-fMRI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/02.restingstateproc/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="resting-state-fmri-processing">
<span id="restingstateproc"></span><h1>Resting-state fMRI processing<a class="headerlink" href="#resting-state-fmri-processing" title="Permalink to this headline">¬∂</a></h1>
<p>This module performs all pre-processing of subject resting-state functional MRI (rsfMRI) scans, in preparation for the construction of functional connectomes. This pipeline is optimized to leverage spin-echo images with reverse phase encoding for distortion correction. For increased functionality, our pipeline can also handle protocols in which a single fieldmap is acquired.</p>
<img alt="../../_images/sankey_rsfmri.png" class="align-center" src="../../_images/sankey_rsfmri.png" />
<div class="section" id="proc-rsfmri">
<h2>-proc_rsfmri<a class="headerlink" href="#proc-rsfmri" title="Permalink to this headline">¬∂</a></h2>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites üñêüèº</p>
<p>You need to run <code class="docutils literal notranslate"><span class="pre">-proc_structural</span></code>, <code class="docutils literal notranslate"><span class="pre">-proc_freesurfer</span></code> and <code class="docutils literal notranslate"><span class="pre">-post_structural</span></code> before this stage</p>
</div>
<a class="reference internal image-reference" href="../../_images/proc_rsfmri.png"><img alt="../../_images/proc_rsfmri.png" class="align-center" src="../../_images/proc_rsfmri.png" style="width: 368.9px; height: 876.4px;" /></a>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-0-0 docutils container">
<div class="docutils container">
<p>Processing steps</p>
</div>
</div>
<div class="item sphinx-data-tab-0-1 docutils container">
<div class="docutils container">
<p>Usage</p>
</div>
</div>
<div class="item sphinx-data-tab-0-2 docutils container">
<div class="docutils container">
<p>Outputs</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-0 active docutils container">
<ul class="simple">
<li><p>Remove first five TRs and reorient to LPI</p></li>
<li><p>Reorients to standard</p></li>
<li><p>Perform motion correction within rsfMRI scan and provided fieldmaps by registering each volume to the scan‚Äôs own average</p></li>
<li><p>Calculate motion outliers</p></li>
<li><p>Apply distortion correction on motion-corrected images</p></li>
<li><p>Calculates binary mask from motion and distortion corrected volume</p></li>
<li><p>High-pass filtering of rsfMRI timeseries to remove frequencies below 0.01Hz</p></li>
<li><p>Run Multivariate Exploratory Linear Optimized Decomposition into Independent Components (MELODIC) on filtered timeseries</p></li>
<li><p>Compute linear and non-linear registrations between fMRI and T1-nativepro space, as well as boundary-based registration between fMRI and native Freesurfer space</p></li>
<li><p>Run FMRIB‚Äôs ICA-based Xnoiseifier (ICA-FIX) using specified training file. Note that if ICA-FIX is not found on the user‚Äôs system, or if MELODIC failed, ICA-FIX will be skipped and further processing will be performed using high-pass filtered timeseries</p></li>
<li><p>Calculate global and tissue-specific signal from processed timeseries (can be used for global-signal regression)</p></li>
<li><p>Compute motion confounds matrix from processed timeseries, to remove effects of frames with large motion in the timeseries</p></li>
<li><p>Register processed timeseries to native cortical surface. Minimially pre-processed (i.e. motion and distortion corrected) timeseries are also registered to the native cortical surface to compute statistics such as temporal signal-to-noise</p></li>
<li><p>Surface-template registration of native surface timeseries (fsaverage5, conte69)</p></li>
<li><p>Native surface, fsaverage5, and conte69-mapped timeseries are each smoothed with a 10mm Gaussian kernel</p></li>
<li><p>Use previously computed registrations to align cerebellar and subcortical parcellation to fMRI space</p></li>
<li><p>Regress motion spikes from cerebellar, subcortical, and cortical timeseries in linear model</p></li>
<li><p>Concatenate cerebellar, subcortical, and parcellated cortical timeseries and compute correlation matrix</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-1 docutils container">
<p><strong>Terminal:</strong></p>
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-proc_rsfmri</strong></pre>
<p><strong>Docker command:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -proc_rsfmri
</pre></div>
</div>
<p><strong>Optional arguments:</strong></p>
<dl class="option-list">
<dt><kbd><span class="option">-m<var>ainScanStr</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;str&gt;</span></code> String to manually identify the main scan for rsfMRI processing (eg. <em>func/sub-001_&lt;mainScanStr&gt;.nii.gz</em>).
Default string is <em>task-rest_acq-AP_bold</em>.</p>
</dd>
<dt><kbd><span class="option">-f<var>mri_pe</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code> Full path to the main phase encoding scan for rsfMRI processing.
Default string is <em>task-rest_acq-APse_bold</em>.</p>
</dd>
<dt><kbd><span class="option">-f<var>mri_rpe</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code> Full path to the reverse phase encoding scan for rsfMRI processing. If the path is wrong topup will be skipped!.
Default string is <em>task-rest_acq-PAse_bold</em>.</p>
</dd>
<dt><kbd><span class="option">-m<var>ainScanRun</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;num&gt;</span></code> If multiple resting-state scan runs exist in the BIDS rawdata,
you must specify which scan to process using this flag (e.g. ‚Äò1‚Äô).</p>
</dd>
<dt><kbd><span class="option">-p<var>haseReversalRun</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;num&gt;</span></code> If multiple phase encoding runs exist in the BIDS directory (only main phase is checked),
you must specify which file to process using this flag (e.g. ‚Äò1‚Äô).</p>
</dd>
<dt><kbd><span class="option">-t<var>opupConfig</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code> Specify path to config file that should be used for distortion correction using topup.
Default is <em>${FSLDIR}/etc/flirtsch/b02b0_1.cnf</em>.</p>
</dd>
<dt><kbd><span class="option">-s<var>moothWithWB</var></span></kbd></dt>
<dd><p>Specify this option to use workbench tools for surface-based smoothing (more memory intensive), The
default smoothing is performed with freesurfer tools: <em>mri_surf2surf</em>.</p>
</dd>
<dt><kbd><span class="option">-r<var>egress_WM_CSF</var></span></kbd></dt>
<dd><p>Specify this option to perform white matter and CSF signal regression of timeseries.
Default = no white matter and CSF signal regression.</p>
</dd>
<dt><kbd><span class="option">-G<var>SR</var></span></kbd></dt>
<dd><p>Specify this option to perform global signal regression of timeseries.
Default = no global regression.</p>
</dd>
<dt><kbd><span class="option">-n<var>oFIX</var></span></kbd></dt>
<dd><p>Specify this option to skip ICA-FIX processing.
Default = FIX runs with the default training file.</p>
</dd>
<dt><kbd><span class="option">-i<var>cafixTraining</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code> Path to specified ICA-FIX training file for nuisance signal regression
(file.RData). Default is <em>${MICAPIPE}/functions/MICAMTL_training_15HC_15PX.RData</em>.</p>
</dd>
<dt><kbd><span class="option">-r<var>egAffine</var></span></kbd></dt>
<dd><p>Specify this option to perform an Affine registration ONLY from rsfMRI to T1w.
Default is non linear registration using ANTs-SyN.
We recommend this option for rsfMRI acquisitions with low resolution and/or low SNR.</p>
</dd>
<dt><kbd><span class="option">-s<var>esAnat</var></span></kbd></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&lt;str&gt;</span></code> If longitudinal data is provided, this flag allows to register the current <em>functional</em> session to the desired <em>anatomical</em> session
Default processing is independent.</p>
</dd>
</dl>
<div class="admonition-distortion-correction admonition">
<p class="admonition-title">Distortion correction ‚ö†Ô∏è</p>
<p>If the script can‚Äôt find the <em>fmri_rpe</em> (reverse phase encoding), or <em>fmri_pe</em> (phase encoding) images,
the distortion correction will be skipped. If you provided the path to the <em>fmri_pe</em> and <em>fmri_rpe</em> images,
ensured that the paths are correct!!! On the following table you can see the possible scenarios:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 21%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Inputs</p></th>
<th class="head"><p>Output</p></th>
</tr>
<tr class="row-even"><th class="head"><p>fmri_rpe</p></th>
<th class="head"><p>fmri_pe</p></th>
<th class="head"><p>topup</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>runs using pe and rpe</p></td>
</tr>
<tr class="row-even"><td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>runs using main as pe</p></td>
</tr>
<tr class="row-odd"><td><p>No</p></td>
<td><p>No</p></td>
<td><p>skipped</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition-warning-melodic-and-fix admonition">
<p class="admonition-title">WARNING: ‚ö†Ô∏è Melodic and FIX ‚ö†Ô∏è</p>
<p>FIX and Melodic are used by default to remove nuisance variable signal. However our default parameters might not suit all databases.
Our default training file used for FIX was trained in-house, on a subset of 30 participants.
Scans were acquire on a 3T Siemens Magnetom Prisma-Fit equipped with a 64-channel head coil.
rs-fMRI scans of 7 minutes were acquired using multiband accelerated 2D-BOLD echo-planar imaging
(3mm isotropic voxels, TR=600ms, TE=30ms, flip angle=52¬∞, FOV=240√ó240mm2, slice thickness=3mm, mb factor=6, echo spacing=0.54ms).
If your acquisition parameters are similar, feel free to use the defaults options in <code class="docutils literal notranslate"><span class="pre">-proc_rsfmri</span></code>.</p>
<p>Otherwise we recommend you to <a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FIX/UserGuide#Training_datasets">train your own dataset for FIX</a>,
or do not use fix and try a different method for nuisance variable signal removal, e.g.:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">On the next example FIX and Melodic will be skipped, but global signal, white matter and CSF regressions will be applied:</span><a class="headerlink" href="#id1" title="Permalink to this code">¬∂</a></div>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>mica-pipe -sub &lt;subject_id&gt; -out &lt;outputDirectory&gt; -bids &lt;BIDS-directory&gt; <span class="se">\</span>
          -proc_rsfmri -noFIX -regress_WM_CSF -GSR
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="admonition-longitudinal-acquisitions admonition">
<p class="admonition-title">Longitudinal acquisitions ‚ö†Ô∏è</p>
<p>If your database contains multiple sessions (different days) and you wish to register the rsfMRI to the same
anatomical session, you should use the <code class="docutils literal notranslate"><span class="pre">-sesAnat</span></code> flag. For example if you database looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sub-01
‚îú‚îÄ‚îÄ ses-func01
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ func
‚îú‚îÄ‚îÄ ses-func02
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ func
‚îî‚îÄ‚îÄ ses-struct01
 ¬†¬† ‚îî‚îÄ‚îÄ anat
</pre></div>
</div>
<p>You should specify the <code class="docutils literal notranslate"><span class="pre">-sesAnat</span> <span class="pre">struct01</span></code> to register each session to the same anatomical volume.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">On the next example, func01 and func02 will be registered to the anatomical image in struct01:</span><a class="headerlink" href="#id2" title="Permalink to this code">¬∂</a></div>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> mica-pipe -sub <span class="m">01</span> -ses func01 -proc_rsfmri -sesAnat struct01 -bids &lt;bidsDir&gt; -out &lt;outDir&gt;
 mica-pipe -sub <span class="m">01</span> -ses func02 -proc_rsfmri -sesAnat struct01 -bids &lt;bidsDir&gt; -out &lt;outDir&gt;
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-2 docutils container">
<p>Directories created or populated by <strong>-proc_rsfmri</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">func</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">ICA_MELODIC</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">surfaces</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">volumetric</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">xfms</span>
</pre></div>
</div>
<p>Files generated by <strong>-proc_rsfmri</strong>:</p>
<pre class="literal-block">- All outputs generated by MELODIC, or necessary for ICA-FiX, are stored in:
    <em>&lt;outputDirectory&gt;/micapipe/&lt;sub&gt;/func/ICA_MELODIC</em>

- All volumetric processing outputs are stored in
    <em>&lt;outputDirectory&gt;/micapipe/&lt;sub&gt;/func/volumetric</em>

    - rsfMRI processing json card:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_clean.json</em>

    - Motion confounds processing (&lt;tag&gt; = reversePhaseScan, mainPhaseScan):
        <em>&lt;sub&gt;_space-rsfmri_&lt;tag&gt;.1D</em>

    - Motion outliers and metric values:
        <em>&lt;sub&gt;_space-rsfmri_spikeRegressors_FD.1D</em>
        <em>&lt;sub&gt;_space-rsfmri_metric_FD.1D</em>

    - Motion and distortion corrected image:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho.nii.gz</em>

    - Mean motion and distortion corrected image:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_mean.nii.gz</em>

    - Skull-stipped mean motion and distortion corrected image:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_brain.nii.gz</em>

    - High-passed, motion and distortion corrected image:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_HP.nii.gz</em>

    - Nuisance-signal regressed timeseries (i.e. output of ICA-FIX):
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_clean.nii.gz</em>

    - Tissue-specific mean signal (&lt;tissue&gt; = CSF, GM, or WM):
        <em>&lt;sub&gt;_space-rsfmri_pve_&lt;tissue&gt;.txt</em>

    - Global mean signal:
        <em>&lt;sub&gt;_space-rsfmri_global.txt</em>

    - Subcortical segmentation in fMRI space:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_subcortical.nii.gz</em>

    - Mean signal in each subcortical parcel:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_timeseries_subcortical.txt</em>

    - Cerebellar segmentation in fMRI space:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_cerebellum.nii.gz</em>

    - Mean signal in each cerebellar parcel:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_timeseries_cerebellum.txt</em>

    - Parcel statistics for cerebellum, to screen for any missing parcels:
        <em>&lt;sub&gt;_space-rsfmri_desc-singleecho_cerebellum_roi_stats.txt</em>


- Vertexwise cortical timeseries (&lt;hemi&gt; = rh, lh)
    stored in <em>&lt;outputDirectory&gt;/micapipe/func/surfaces</em>:

    - Motion and distortion corrected timeseries mapped to native cortical surface:
        <em>&lt;sub&gt;_rsfmri_space-fsnative_&lt;hemi&gt;_NoHP.mgh</em>

    - Fully pre-processed timeseries mapped to native cortical surface:
        <em>&lt;sub&gt;_rsfmri_space-fsnative_&lt;hemi&gt;.mgh</em>
        <em>&lt;sub&gt;_rsfmri_space-fsnative_&lt;hemi&gt;_10mm.mgh</em>

    - Timeseries mapped to fsaverage5 template:
        <em>&lt;sub&gt;_rsfmri_space-fsaverage5_&lt;hemi&gt;.mgh</em>
        <em>&lt;sub&gt;_rsfmri_space-fsaverage5_&lt;hemi&gt;_10mm.mgh</em>

    - Timeseries mapped to conte69 template:
        <em>&lt;sub&gt;_rsfmri_space-conte69-32k_&lt;hemi&gt;.mgh</em>
        <em>&lt;sub&gt;_rsfmri_space-conte69-32k_&lt;hemi&gt;_10mm.mgh</em>

    - Vertexwise and smoothed timeseries on conte69 template, following regression of motion spikes:
        <em>&lt;sub&gt;_rsfmri_space-conte69-32k_desc-timeseries_clean.txt</em>

- Temporal signal-to-noise ratio computed on native cortical surface from motion and distortion correction timesries:
    <em>&lt;sub&gt;_rsfmri_desc-tSNR.txt</em>

- Functional connectome matrices (r values) generated from smoothed, parcellated timeseries sampled in subcortex, cerebellum, and cortical surface
   &lt;parc&gt; = up to 18 parcellations

    - Conte69 cortical surface:
        <em>&lt;sub&gt;_rsfmri_space-conte69-32k_atlas-&lt;parc&gt;_desc-FC.txt</em>

    - Native cortical surface:
        <em>&lt;sub&gt;_rsfmri_space-fsnative_atlas-&lt;parc&gt;_desc-FC.txt</em>

    - Contatenated timeseries sampled in subcortex, cerebellum, and parcellated native cortical surface models:
        <em>&lt;sub&gt;_rsfmri_space-fsnative_atlas-&lt;parc&gt;_desc-timeseries.txt</em>

- rsfMRI registration files are found in <em>&lt;outputDirectory&gt;/micapipe/&lt;sub&gt;/xfms</em>

    - Boundary based registration from rsfMRI space to native freesurfer space:
        <em>&lt;sub&gt;_from-rsfmri_to-fsnative_bbr_outbbreg_FIX.nii.gz</em>
        <em>&lt;sub&gt;_from-rsfmri_to-fsnative_bbr.dat</em>
        <em>&lt;sub&gt;_from-rsfmri_to-fsnative_bbr.dat.log</em>
        <em>&lt;sub&gt;_from-rsfmri_to-fsnative_bbr.dat.mincost</em>
        <em>&lt;sub&gt;_from-rsfmri_to-fsnative_bbr.dat.param</em>
        <em>&lt;sub&gt;_from-rsfmri_to-fsnative_bbr.dat.sum</em>

    - Affine registration between T1w nativepro and rsfmri space:
        <em>&lt;sub&gt;_rsfmri_from-rsfmri_to-nativepro_mode-image_desc-affine_0GenericAffine.mat</em>
        <em>&lt;sub&gt;_rsfmri_from-rsfmri_to-nativepro_mode-image_desc-affine_InverseWarped.nii.gz</em>
        <em>&lt;sub&gt;_rsfmri_from-rsfmri_to-nativepro_mode-image_desc-affine_Warped.nii.gz</em>

    - Non-linear registrations between T1w in dwi space to wmNorm in dwi space:
        <em>&lt;sub&gt;_rsfmri_from-nativepro_rsfmri_to-rsfmri_mode-image_desc-SyN_0GenericAffine.mat</em>
        <em>&lt;sub&gt;_rsfmri_from-nativepro_rsfmri_to-rsfmri_mode-image_desc-SyN_1InverseWarp.nii.gz</em>
        <em>&lt;sub&gt;_rsfmri_from-nativepro_rsfmri_to-rsfmri_mode-image_desc-SyN_1Warp.nii.gz</em>
        <em>&lt;sub&gt;_rsfmri_from-nativepro_rsfmri_to-rsfmri_mode-image_desc-SyN_InverseWarped.nii.gz</em>
        <em>&lt;sub&gt;_rsfmri_from-nativepro_rsfmri_to-rsfmri_mode-image_desc-SyN_Warped.nii.gz</em></pre>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../02.microstructproc/index.html" class="btn btn-neutral float-right" title="Microstructural profile covariance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../02.dwiproc/index.html" class="btn btn-neutral float-left" title="Diffusion-weighted imaging processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, micapipe

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a> and modified by SL and RRC 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>


  <footer>
    
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. Modified by SL ü§† 

  </footer>



</body>
</html>