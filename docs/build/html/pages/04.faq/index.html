

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Frequent Asked Questions &mdash; micapipe  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mica-pipe_tabs_tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mica-pipe_colors.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Citing micapipe" href="../06.citingmicapipe/index.html" />
    <link rel="prev" title="Building gradients" href="../04.gradients/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #261F4A" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/html_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01.install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.whatyouneed/index.html">Usages Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.execution/index.html">Micapipe usage overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.whatsnew/index.html">What’s new?</a></li>
</ul>
<p class="caption"><span class="caption-text">Processing modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02.structuralproc/index.html">Structural processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.dwiproc/index.html">Diffusion-weighted imaging processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.restingstateproc/index.html">Resting-state fMRI processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.microstructproc/index.html">Microstructural profile covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.qc/index.html">Quality control</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05.mic2bids/index.html">From DICOMS to BIDS: <code class="docutils literal notranslate"><span class="pre">mic2bids</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.micapipe_cleanup/index.html"><code class="docutils literal notranslate"><span class="pre">micapipe_cleanup</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.micapipe_anonymize/index.html"><code class="docutils literal notranslate"><span class="pre">micapipe_anonymize</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.autotract/index.html">Automatic Bundle Segmentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../04.databases/index.html">Processing databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.matrices/index.html">Output matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.surfaces/index.html">Surface visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.gradients/index.html">Building gradients</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06.citingmicapipe/index.html">Citing micapipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.references/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.acknowledge/index.html">Acknowlegdements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">micapipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Frequent Asked Questions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/04.faq/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="faq">
<span id="faqa"></span><h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h1>
<dl>
<dt>Q: How do I register a volume from rsfMRI or DWI space to MNI152?</dt><dd><p><strong>A:</strong> although micapipe calculates all the necessary transformation matrices and warp fields to register from any native space to MNI152, this procedure is not implemented at any point in the pipeline.
Using the following information you should be able to register between any spaces using ANTs.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Map from MNI152 0.8mm space to DWI nativespace</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># map_mni2dwi</span>
<span class="k">function</span> map_mni2dwi<span class="o">()</span> <span class="o">{</span>
<span class="c1"># map_dwi ROIinMNI.nii.gz BIDSPATH CASE OUTPATH</span>
<span class="nv">outname</span><span class="o">=</span><span class="sb">`</span>basename <span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="sb">`</span>
antsApplyTransforms -d <span class="m">3</span> -i <span class="si">${</span><span class="nv">1</span><span class="si">}</span> <span class="se">\</span>
          -r <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/dwi/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_desc-b0.nii.gz <span class="se">\</span>
          -n GenericLabel <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_from-dwi_to-dwi_mode-image_desc-SyN_1Warp.nii.gz <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_from-dwi_to-dwi_mode-image_desc-SyN_0GenericAffine.mat <span class="se">\</span>
          -t <span class="o">[</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_from-dwi_to-nativepro_mode-image_desc-0GenericAffine.mat,1<span class="o">]</span> <span class="se">\</span>
          -t <span class="o">[</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_from-nativepro_brain_to-MNI152_0.8mm_mode-image_desc-SyN_0GenericAffine.mat,1<span class="o">]</span> <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_from-nativepro_brain_to-MNI152_0.8mm_mode-image_desc-SyN_1InverseWarp.nii.gz <span class="se">\</span>
          -o <span class="si">${</span><span class="nv">4</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_space-dwi_t1w_<span class="si">${</span><span class="nv">outname</span><span class="si">}</span> -v
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Map from DWI native space to MNI152 0.8mm</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># map_dwi2mni</span>
<span class="k">function</span> map_dwi2mni<span class="o">()</span> <span class="o">{</span>
<span class="c1"># map_dwi ROIinMNI.nii.gz BIDSPATH CASE OUTPATH</span>
<span class="nv">outname</span><span class="o">=</span><span class="sb">`</span>basename <span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="sb">`</span>
do_cmd antsApplyTransforms -d <span class="m">3</span> -i <span class="si">${</span><span class="nv">1</span><span class="si">}</span> <span class="se">\</span>
          -r /data/mica3/boristest/ROIs/MNI152_T1_1mm.nii.gz <span class="se">\</span>
          -n GenericLabel <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_from-nativepro_brain_to-MNI152_0.8mm_mode-image_desc-SyN_1Warp.nii.gz <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_from-nativepro_brain_to-MNI152_0.8mm_mode-image_desc-SyN_0GenericAffine.mat <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_from-dwi_to-nativepro_mode-image_desc-0GenericAffine.mat <span class="se">\</span>
          -t <span class="o">[</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_from-dwi_to-dwi_mode-image_desc-SyN_0GenericAffine.mat,1<span class="o">]</span> <span class="se">\</span>
          -t <span class="si">${</span><span class="nv">2</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>/ses-01/xfm/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_ses-01_space-dwi_from-dwi_to-dwi_mode-image_desc-SyN_1Warp.nii.gz <span class="se">\</span>
          -o <span class="si">${</span><span class="nv">4</span><span class="si">}</span>/<span class="si">${</span><span class="nv">3</span><span class="si">}</span>_mnispace_<span class="si">${</span><span class="nv">outname</span><span class="si">}</span> -v
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
</dd>
<dt>Q: How do I modify the smoothing on the surfaces?</dt><dd><p>A: By default micapipe -Morphology only applies a smoothing of 10mm over the surfaces</p>
</dd>
<dt>Q: How do I process the rsfMRI If I have different runs in the same session?</dt><dd><p>A:</p>
</dd>
<dt>Q: Can I process multi-echo rsfMRI acquisition with micapipe?</dt><dd><p>A:</p>
</dd>
<dt>Q: What if my database already has Freesurfer outputs with Quality Check?</dt><dd><p>A:</p>
</dd>
<dt>Q: What if I have more than one set of DWI acquisitions?</dt><dd><p>A:</p>
</dd>
<dt>Q: What if I already have DWI processed data?</dt><dd><p>A:</p>
</dd>
<dt>Q: What if I already have rsfMRI processed data? (eg. from fmriPREP)</dt><dd><p>A:</p>
</dd>
<dt>Q: Why does micapipe not apply slice timing correction in the rsfMRI processing?</dt><dd><p>A:</p>
</dd>
<dt>Q: How do I train an ICA-FIX RData file?</dt><dd><p>A:</p>
</dd>
<dt>Q: Can I use a different Cortical / subcortical / cerebellar atlas  not included in the micapipe?</dt><dd><p>A: At the present time this feature is not included in the latest release.</p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../06.citingmicapipe/index.html" class="btn btn-neutral float-right" title="Citing micapipe" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../04.gradients/index.html" class="btn btn-neutral float-left" title="Building gradients" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, micapipe

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a> and modified by SL and RRC 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>


  <footer>
    
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. Modified by SL 🤠 

  </footer>



</body>
</html>