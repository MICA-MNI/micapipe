<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MPC &mdash; micapipe  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/mica-pipe_colors.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Quality control" href="../02.qc/index.html" />
    <link rel="prev" title="fMRI processing" href="../02.restingstateproc/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #261F4A" >
            <a href="../../index.html">
            <img src="../../_static/html_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01.install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.whatyouneed/index.html">Usages Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.whatsnew/index.html">What‚Äôs new?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Processing modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../02.structuralproc/index.html">Structural processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.dwiproc/index.html">Diffusion-weighted imaging processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.restingstateproc/index.html">fMRI processing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Microstructural profile covariance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mpc">-MPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02.qc/index.html">Quality control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.aslproc/index.html">Arterial spin labeling processing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05.mic2bids/index.html">From DICOMS to BIDS: <code class="docutils literal notranslate"><span class="pre">mic2bids</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.micapipe_cleanup/index.html"><code class="docutils literal notranslate"><span class="pre">micapipe_cleanup</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.micapipe_anonymize/index.html"><code class="docutils literal notranslate"><span class="pre">micapipe_anonymize</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.autotract/index.html">Automatic Bundle Segmentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../04.start2end/index.html">Processing step by step: start to finish with <code class="docutils literal notranslate"><span class="pre">micapipe</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.databases/index.html">Processing databases with <code class="docutils literal notranslate"><span class="pre">micapipe</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.matrices/index.html">Main output matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.surfaces/index.html">Surface visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.gradients/index.html">Building gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.tckdownsample/index.html">How to downsample a tractogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.faq/index.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References &amp; Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06.citingmicapipe/index.html">Citing micapipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.references/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.acknowledge/index.html">Acknowledgements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #261F4A" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">micapipe</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">MPC</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/pages/02.microstructproc/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="microstructural-profile-covariance">
<span id="microstructproc"></span><h1>Microstructural profile covariance<a class="headerlink" href="#microstructural-profile-covariance" title="Permalink to this heading">ÔÉÅ</a></h1>
<p>This module samples intracortical intensities from a microstructurally-sensitive contrast. This is achieved by constructing a series of equivolumetric surfaces between pial and white matter boundaries, yielding unique intracortical intensity profiles at each vertex of the native surface mesh. This approach has been previously applied in the <a class="reference external" href="https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.3000284">whole cortex</a>, as well as in targeted structures such as the <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S1053811920303451">insula</a>. By parcellating and cross-correlating nodal intensity profiles, this module profiles microstructural profile covariance (MPC) matrices describing similiarity in intracortical microstructure across the cortex.</p>
<p>Intracortical equivolumetric surfaces are generated using scripts from the <a class="reference external" href="https://github.com/kwagstyl/surface_tools">surface tools repository</a>, available via GitHub.</p>
<figure class="align-center">
<img alt="../../_images/sankey_mpc.png" src="../../_images/sankey_mpc.png" />
</figure>
<section id="mpc">
<h2>-MPC<a class="headerlink" href="#mpc" title="Permalink to this heading">ÔÉÅ</a></h2>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites üñêüèº</p>
<p>You need to run <code class="docutils literal notranslate"><span class="pre">-proc_structural</span></code>, <code class="docutils literal notranslate"><span class="pre">-proc_freesurfer</span></code> and <code class="docutils literal notranslate"><span class="pre">-post_structural</span></code> before this stage</p>
</div>
<figure class="align-center">
<img alt="../../_images/MPC_01-14.gif" src="../../_images/MPC_01-14.gif" />
</figure>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Processing steps</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Usage</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Outputs</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>Compute boundary-based registration from microstructural imaging volume to FreeSurfer native space</p></li>
<li><p>Generate 16 equivolumetric surfaces between pial and white matter boundary previously defined from FreeSurfer. Surfaces closest to pial and white matter boundaries are then discarded to account for partial volume effects, resulting in 14 surfaces used for further analyses</p></li>
<li><p>Perform surface-based registration to fsaverage5 and conte69-32k templates</p></li>
<li><p>Average intensity profiles within parcels defined on the native FreeSurfer surface, while excluding outlier vertices</p></li>
<li><p>Perform partial correlation, controlling for parcel-wide mean profile, across all pairs of intensity profiles</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p><strong>Terminal:</strong></p>
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-MPC</strong> &lt;options&gt;</pre>
<p><strong>Docker command:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -MPC
</pre></div>
</div>
<p><strong>Optional arguments:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">-MPC</span></code> has several optional arguments:</p>
<table class="colwidths-given tight-table docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 91%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Optional argument</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-microstructural_img</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code></p></td>
<td><p>Specifies an input image on which to sample intensities for the MPC analysis. You must specify this flag if your dataset does not include a qT1 image, or if your microstructurally-sensitive imaging contrast is not stored in the <em>rawdata</em>¬†branch of the BIDS directory (for example, T1-weighted divided by T2-weighted derivative file).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-microstructural_lta</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code></p></td>
<td><p>This option lets the user specify their own registration file to map the input image to native freesurfer space. The registration file must be in <code class="docutils literal notranslate"><span class="pre">.lta</span></code> format. If omitted, the registration will be performed in the script using <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/bbregister/">bbregister</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-microstructural_reg</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code></p></td>
<td><p>Path to file which will be registered to native freesurfer space (e.g. <code class="docutils literal notranslate"><span class="pre">./img_2reg.nii.gz</span></code>). This image can be different from the input provided to <code class="docutils literal notranslate"><span class="pre">-microstructural_img</span></code>, but the two images must be in the same space!</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p>Directories created or populated by <strong>-MPC</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/&lt;</span><span class="n">sub</span><span class="o">&gt;/</span><span class="n">anat</span><span class="o">/</span><span class="n">surfaces</span><span class="o">/</span><span class="n">micro_profiles</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/&lt;</span><span class="n">sub</span><span class="o">&gt;/</span><span class="n">anat</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/&lt;</span><span class="n">sub</span><span class="o">&gt;/</span><span class="n">xfm</span>
</pre></div>
</div>
<p>Files generated by <strong>-MPC</strong>:</p>
<pre class="literal-block">- Microstructural image in native FreeSurfer space:
   <em>&lt;outputDirectory&gt;/micapipe/&lt;sub&gt;/anat/&lt;sub&gt;_space-fsnative_desc-micro.nii.gz</em>

- Boundary-based registration outputs from microstructural image to native FreeSurfer space:
   <em>&lt;outputDirectory&gt;/micapipe/&lt;sub&gt;/xfm/</em>
       &lt;sub&gt;_from-micro_to-fsnative_bbr.dat
       &lt;sub&gt;_from-micro_to-fsnative_bbr.dat.log
       &lt;sub&gt;_from-micro_to-fsnative_bbr.dat.mincost
       &lt;sub&gt;_from-micro_to-fsnative_bbr.dat.param
       &lt;sub&gt;_from-micro_to-fsnative_bbr.dat.sum

- Equivolumetric surface sampling ouputs stored in <em>&lt;outputDirectory&gt;/micapipe/anat/surfaces/micro_profiles</em>:

    - MPC json card:
       <em>&lt;sub&gt;_MPC.json</em>

    - Native FreeSurfer space intensity at depth #:
       <em>&lt;sub&gt;_space-fsnative_desc-&lt;hemi&gt;_MPC-&lt;#&gt;.mgh</em>

    - fsaverage5 template space intensity at depth #:
       <em>&lt;sub&gt;_space-fsaverage5_desc-&lt;hemi&gt;_MPC-&lt;#&gt;.mgh</em>

    - conte69 template space intensity at depth #:
       <em>&lt;sub&gt;_space-conte69-32k_desc-&lt;hemi&gt;_MPC-&lt;#&gt;.mgh</em>

    - Parcellated intensity profiles:
       <em>&lt;sub&gt;_space-fsnative_atlas-&lt;atlas&gt;_desc-intensity_profiles.txt</em>

    - MPC matrices:
       <em>&lt;sub&gt;_space-fsnative_atlas-&lt;atlas&gt;_desc-MPC.txt</em></pre>
</div></div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../02.qc/index.html" class="btn btn-neutral float-right" title="Quality control" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../02.restingstateproc/index.html" class="btn btn-neutral float-left" title="fMRI processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2022, micapipe

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a> and modified by SL and RRC 

</footer>

        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
         .wy-nav-content { max-width: none; }
  </style>


  <footer>
    
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. Modified by SL ü§† 

  </footer>



</body>
</html>